<!DOCTYPE html>
<html>



<head>
  <title>Lighthouse | SOOJIN BLOG</title>
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="author" content="SOOJIN">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="/assets/css/main.css" media="all">
  <link rel="canonical" href="http://localhost:4000/2022-12/Lighthouse">
  <link rel="alternate" type="application/rss+xml" title="SOOJIN BLOG"
    href="/feed.xml" />

  <!-- favicon -->
  <link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon" />
  <link rel="icon" href="/assets/img/favicon.ico" type="image/x-icon" />

  <!-- font -->
  <link href="https://fonts.googleapis.com/css?family=Titillium+Web:400,400i" rel="stylesheet">
</head>

<body>
  <div class="content">

    <header class="header">

  <div class="header_content">
    <label class="theme_changer">
      <input theme_toggle type="checkbox">
      <div class="button"></div>
    </label>
    <a class="header_circle" href="/">
      <img src="/assets/img/cat.jpg" alt="catbook">
    </a>
    <span class="header_name">SOOJIN</span>
    <span class="header_job">배운 것을 기록하는 공간</span>
    <span class="header_mes"></span>

    <nav class="nav">
      
      
      
      <ul class="nav_list">
        <li class="nav_item">
          <a href="/categories/writing" id="aa">writing
            (1)</a>
        </li>
      </ul>
      
      
      <ul class="nav_list">
        <li class="nav_item">
          <a href="/categories/TIL" id="aa">TIL
            (15)</a>
        </li>
      </ul>
      
      
      <ul class="nav_list">
        <li class="nav_item">
          <a href="/categories/React" id="aa">React
            (2)</a>
        </li>
      </ul>
      
      
      <ul class="nav_list">
        <li class="nav_item">
          <a href="/categories/UI-UX" id="aa">UI-UX
            (1)</a>
        </li>
      </ul>
      
      
      <ul class="nav_list">
        <li class="nav_item">
          <a href="/categories/Redux" id="aa">Redux
            (1)</a>
        </li>
      </ul>
      
      
      <ul class="nav_list">
        <li class="nav_item">
          <a href="/categories/css" id="aa">css
            (1)</a>
        </li>
      </ul>
      
    </nav>
  </div>

</header>



    <nav class="mobile_menu">

  <ul class="nav_list">
    
    
    

    <li class="nav_item">
      <a href="/categories/writing" id="aa">writing (1)</a>
    </li>
    
    

    <li class="nav_item">
      <a href="/categories/TIL" id="aa">TIL (15)</a>
    </li>
    
    

    <li class="nav_item">
      <a href="/categories/React" id="aa">React (2)</a>
    </li>
    
    

    <li class="nav_item">
      <a href="/categories/UI-UX" id="aa">UI-UX (1)</a>
    </li>
    
    

    <li class="nav_item">
      <a href="/categories/Redux" id="aa">Redux (1)</a>
    </li>
    
    

    <li class="nav_item">
      <a href="/categories/css" id="aa">css (1)</a>
    </li>
    
  </ul>

</nav>
    
    <main class="main">

    <div class="post">
  <div>
    
    <p class="post_title">Lighthouse</p>
    
  </div>
  <div class="post_data">
    
    <span class="post_date">Dec 5, 2022</span>
    
    
    <span class="post_categories">
      &raquo; 
      <a href="/categories/TIL">TIL</a>
    </span>
    
  </div>
  <div class="post_content">
    <h2 id="lighthouse">Lighthouse</h2>

<p><strong>Lighthouse</strong> 는 구글에서 개발한 오픈소스로서 웹 페이지의 품질을 개선할 수 있는 자동화 툴입니다. Lighthouse는 <strong>Performance(성능), Accessibility(접근성), PWA, SEO</strong> 등을 검사하며 이를 이용해 사용자는 어떤 웹페이지든 품질 검사를 할 수 있습니다.</p>

<p><br /></p>

<ol>
  <li>
    <p>Performance 항목에서는 웹 성능을 측정합니다. 화면에 콘텐츠가 표시되는데 시간이 얼마나 걸리는지, 표시된 후 사용자와 상호작용하기 까진 얼마나 걸리는지, 화면에 불안정한 요소는 없는지 등을 확인합니다.</p>
  </li>
  <li>
    <p>Accessibility 항목에서는 웹 페이지가 웹 접근성을 잘 갖추고 있는지 확인합니다. 대체 텍스트를 잘 작성했는지, 배경색과 콘텐츠 색상의 대비가 충분한지, 적절한 WAI-ARIA 속성을 사용했는지 등을 확인합니다.</p>
  </li>
  <li>
    <p>Best Practices 항목에서는 웹 페이지가 웹 표준 모범 사례를 잘 따르고 있는지 확인합니다. HTTPS 프로토콜을 사용하는지, 사용자가 확인할 확률은 높지 않지만 콘솔 창에 오류가 표시 되지는 않는지 등을 확인합니다.</p>
  </li>
  <li>
    <p>SEO 항목에서는 웹 페이지가 검색 엔진 최적화가 잘 되어있는지 확인합니다. 애플리케이션의 robots.txt가 유효한지, <code class="language-plaintext highlighter-rouge">&lt;meta&gt;</code> 요소는 잘 작성되어 있는지, 텍스트 크기가 읽기에 무리가 없는지 등을 확인합니다.</p>
  </li>
  <li>
    <p>PWA 항목에서는 해당 웹 사이트가 모바일 애플리케이션으로서도 잘 작동하는지 확인합니다. 앱 아이콘을 제공하는지, 스플래시 화면이 있는지, 화면 크기에 맞게 콘텐츠를 적절하게 배치했는지 등을 점수가 아닌 체크리스트로 확인합니다.</p>
  </li>
</ol>

<h3> Lighthouse의 Performance 측정 메트릭 </h3>

<p><img src="https://user-images.githubusercontent.com/111376707/205558252-9394e1f4-48b4-4e07-9922-6944c25a5d2b.png" alt="스크린샷 2022-12-05 14-43-17" /></p>

<ol>
  <li>
    <p>First Contentful Paint, 줄여서 FCP는 성능(Performance) 지표를 추적하는 메트릭입니다. FCP는 사용자가 페이지에 접속했을 때 브라우저가 DOM 컨텐츠의 첫 번째 부분을 렌더링하는 데 걸리는 시간을 측정합니다. 우수한 사용자 경험을 제공하려면 FCP가 1.8초 이하여야 합니다.</p>
  </li>
  <li>
    <p>Largest Contentful Paint, 줄여서 LCP는 뷰포트를 차지하는 가장 큰 콘텐츠(이미지 또는 텍스트 블록)의 렌더 시간을 측정합니다. 이를 이용해 주요 콘텐츠가 유저에게 보이는 시간까지를 가늠할 수 있습니다.</p>
  </li>
  <li>
    <p>Speed Index는 성능(Performance) 지표를 추적하는 메트릭입니다. Speed Index는 페이지를 로드하는 동안 얼마나 빨리 컨텐츠가 시각적으로 표시되는 지를 측정합니다.</p>
  </li>
  <li>
    <p>Time to interactive, 줄여서 TTI는 페이지가 로드되는 시점부터 사용자와의 상호작용이 가능한 시점까지의 시간을 측정합니다. TTI는 페이지가 완전히 상호 작용 가능하기까지의 시간을 측정합니다.</p>
  </li>
  <li>
    <p>Total Blocking Time, 줄여서 TBT는 페이지가 유저와 상호작용하기까지의 막혀있는 시간을 측정합니다. Lighthouse에서는 FCP와 TTI 사이에 긴 시간이 걸리는 작업들을 모두 기록하여 TBT를 측정합니다.</p>
  </li>
  <li>
    <p>Cumulative Layout Shift, 줄여서 CLS는 사용자에게 컨텐츠가 화면에서 얼마나 많이 움직이는지(불안정한 지)를 수치화한 지표입니다. 이 지표를 통해 화면에서 이리저리 움직이는 요소(불안정한 요소)가 있는 지를 측정할 수 있습니다.</p>
  </li>
</ol>

<p><br /></p>

<h3>개선 방향 잡기</h3>

<p><img src="https://user-images.githubusercontent.com/111376707/205558063-2c5275fe-9084-4c51-8095-efc860279960.png" alt="스크린샷 2022-12-05 14-17-46" /></p>

<p>Opportunities 항목을 확인하면 각 메트릭별 문제를 확인할 수 있습니다.</p>

<h4>- Serve images in next-gen formats</h4>

<p><br /></p>

<p>Next Generation의 줄임말인 next-gen 이미지 형식은 압축 시 원본 이미지의 품질을 유지하는 웹에 최적화된 이미지 파일 형식입니다. 또한 네트워크 데이터를 덜 소비하는 이미지 형식을 제공하므로 로드 시간이 더 빨라집니다.
<br /></p>

<p>Next-gen 이미지 형식에는 두가지 유형이 있습니다.</p>

<ul>
  <li>
    <p>AVIF(AV1 Image File Format) : AVIF는 WebP를 훨씬 능가하는 무손실 이미지 압축 기능으로 설계되었습니다. 그러나 AVIF의 한 가지 주요 단점은 대부분의 브라우저와의 제한된 호환성입니다.</p>
  </li>
  <li>
    <p>WebP (Web Picture Format) : WebP는 웹 이미지에 대한 손실 및 무손실 압축을 제공하는 Google에서 개발한 이미지 파일 형식입니다. 이미지 품질을 유지하면서 이미지를 더 작은 크기로 압축하는 이미지 파일 형식입니다.
<br /></p>
  </li>
</ul>

<p>WebP 및 AVIF와 같은 차세대 형식으로 이미지를 쉽게 변환할 수 있습니다. 이미지를 제공하는 것은 다른 이야기입니다.
<br /></p>

<p>New-gen 형식으로 이미지를 제공하는 방법</p>

<p><br /></p>

<p>1.HTML5 <code class="language-plaintext highlighter-rouge">&lt;picture&gt;</code> 요소 사용</p>

<p>WebP 이미지를 제공하는 또 다른 좋은 방법은 사용자의 브라우저에 의존하여 표시할 최상의 이미지 형식을 선택하는 것입니다. 이 방법의 장점 중 하나는 WebP와 호환되지 않는 브라우저에서 다른 이미지 형식을 선택할 수 있는 내장 이미지 백업입니다.</p>

<p><br /></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;picture&gt;</span>
  <span class="nt">&lt;source</span> <span class="na">srcset=</span><span class="s">"logo.webp"</span> <span class="na">type=</span><span class="s">"image/webp"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"logo.png"</span> <span class="na">alt=</span><span class="s">"logo"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/picture&gt;</span>
</code></pre></div></div>

<p><br /></p>

<p>2.자바스크립트 활용</p>

<p>Javascript는 WebP 이미지 형식과 호환되는 브라우저를 감지하는 Modernizr라는 라이브러리를 이용할 수 있습니다. 해당 라이브러리는 사용자의 브라우저가 제공해야 하는 기본 CSS3 및 HTML5 기능을 테스트하는 데 도움이 됩니다.</p>

<p><br /></p>

<h4> - Properly size images</h4>

<p><br /></p>

<p>이미지 크기를 적절하게 조정하는 방법</p>

<p>1.srcset 사용</p>

<p>도메인에서 반응형 이미지 사용 srcset을 쉽게 구현하고 자동화하는 데 사용할 수 있습니다. 기본적으로 다양한 크기의 이미지를 만든 다음 srcset태그를 활용하여 이미지가 제공되는 시기를 정의합니다. 이는 여러 장치 및 크기에 걸쳐 전달할 여러 이미지가 있는 경우 반응형 디자인에 유용합니다.</p>

<p>예를 들어 장치 픽셀 비율(DPR) 에 따라 고해상도 화면을 사용하는 사용자에게만 고해상도 이미지를 보내려고 한다고 가정해 보겠습니다 .</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;img</span>
  <span class="na">srcset=</span><span class="s">"large.jpg 3x, small.jpg 2x"</span>
  <span class="na">src=</span><span class="s">" small.jpg "</span>
  <span class="na">alt=</span><span class="s">" 단일 이미지 "</span>
<span class="nt">/&gt;</span>
</code></pre></div></div>

<ul>
  <li>방문자에게 DPR이 2인 large.jpg를 제공합니다.</li>
  <li>DPR이 1인 방문자에게 small.jpg를 제공합니다.</li>
  <li>브라우저에서 지원되지 않는 경우 srcset브라우저는 기본적으로 small.jpg로 설정됩니다.</li>
</ul>

<p><br /></p>

<p>2.CDN</p>

<p>CDN은 이미지 변환, 최적화 및 전달을 전문으로 하는 서비스입니다.
이미지 CDN은 다음과 같은 방식으로 이미지를 처리할 수 있습니다.</p>

<ul>
  <li>파일 크기를 줄이기 위한 이미지 압축.</li>
  <li>이미지를 적절한 디스플레이로 크기 조정, 자르기 및 자르기.</li>
  <li>이미지를 보다 최적의 형식(예: WebP)으로 변환합니다.</li>
  <li>대기 시간 개선을 위해 글로벌 CDN을 통해 이미지를 제공합니다.</li>
</ul>

<p><br /></p>

<h4> - Use HTTP/2</h4>

<p>HTTP/2는 더 많은 병렬 요청을 처리하기 위한 더 높은 연결 제한과 더 낮은 프로토콜 오버헤드를 포함하여 HTTP/1.1에서 볼 수 있는 많은 제한을 극복합니다.</p>

<p>대부분의 브라우저가 HTTP/2를 지원합니다.</p>

<p><img src="https://user-images.githubusercontent.com/111376707/205565979-403af70f-be60-41fd-b0c9-91df8d499f9c.png" alt="스크린샷 2022-12-05 15-38-45" /></p>

<p>출처 : https://caniuse.com/http2</p>

<p><br /></p>

<p>그러나 국내 대부분의 서버는 현재 HTTP/1.x를 사용하고 있기 때문에 서버가 HTTP/2 통신을 지원하는 지를 확인 한 후 HTTP/2를 사용해야 합니다.</p>

<p><br /></p>

<h4> - Reduce unused JavaScript</h4>

<p><br /></p>

<p>사용하지 않는 JavaScript는 브라우저 실행 시간을 불필요하게 늘려 페이지 로드 속도를 늦춥니다.<br />
 페이지를 로드하는 동안 실행되지 않는 코드에 대해 JavaScript 파일을 확인하여, 사용되지 않은 코드가 20KB 이상인 JavaScript 파일이 표시됩니다.</p>

<ol>
  <li>
    <p>코드 분할</p>

    <p>번들된 JavaScript를 중요한 JavaScript와 중요하지 않은 JavaScript로 분리. 중요한 JavaScript만 먼저 로드되므로 렌더링 차단 동작을 줄일 수 있으며, 그런 다음 페이지에 필요하지 않은 중요하지 않은 JavaScript를 제거 가능</p>
  </li>
  <li>
    <p>사용하지 않는 코드 제거</p>
  </li>
  <li>
    <p>사용하지 않은 import 코드 제거</p>
  </li>
</ol>

  </div>


  
  <div class="post_comment">

    

    


  </div>
  

</div>


    </main>

  </div>

  <footer class="footer">
  <div>
    &copy; 2022 SOOJIN.
    Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>.
    Get this theme
    <a href="https://github.com/starry99/catbook" target="_blank">here</a>.
  </div>
</footer>

  <!-- js from https://codepen.io/MrGrigri/pen/XQmWBv -->

<script>
// @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&dn=expat.txt Expat
    const themePreference = () => {
        const hasLocalStorage = localStorage.getItem('theme');
        let supports = false;
        let theme = undefined;

        if (hasLocalStorage === 'light') {
            theme = 'light';
        }
        if (hasLocalStorage === 'dark') {
            theme = 'dark';
        }

        if (window.matchMedia(`(prefers_color: dark)`).matches) {
            theme = hasLocalStorage ? hasLocalStorage : 'dark';
            supports = true;
        };
        if (window.matchMedia(`(prefers_color: light)`).matches) {
            theme = hasLocalStorage ? hasLocalStorage : 'light';
            supports = true;
        };
        if (window.matchMedia(`(prefers_color: no-preference)`).matches) {
            theme = hasLocalStorage ? hasLocalStorage : 'none';
            supports = true;
        };

        return {
            supports,
            theme
        };
    }

    document.addEventListener('DOMContentLoaded', e => {
        console.clear();

        const userThemePreference = themePreference();
        const toggle = document.querySelector('[theme_toggle]');
        const html = document.documentElement;

        const setTheme = () => {
            switch (userThemePreference.theme) {
                case 'dark':
                    toggle.checked = true;
                    html.classList.add('dark');
                    html.classList.remove('light');
                    break;
                case 'light':
                    toggle.checked = false;
                    html.classList.remove('dark');
                    html.classList.add('light');
                    break;
            }
        }
        setTheme();
        toggle.addEventListener('click', e => {
            if (toggle.checked) {
                html.classList.add('dark');
                html.classList.remove('light');
                localStorage.setItem('theme', 'dark');
            } else {
                html.classList.remove('dark');
                html.classList.add('light');
                localStorage.setItem('theme', 'light');
            }
        }, false);
    }, false);
// @license-end
</script>

</body>
</html>
