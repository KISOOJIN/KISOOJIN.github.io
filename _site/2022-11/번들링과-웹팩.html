<!DOCTYPE html>
<html>



<head>
  <title>번들링과 웹팩 | SOOJIN BLOG</title>
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="author" content="SOOJIN">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="/assets/css/main.css" media="all">
  <link rel="canonical" href="http://localhost:4000/2022-11/%EB%B2%88%EB%93%A4%EB%A7%81%EA%B3%BC-%EC%9B%B9%ED%8C%A9">
  <link rel="alternate" type="application/rss+xml" title="SOOJIN BLOG"
    href="/feed.xml" />

  <!-- favicon -->
  <link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon" />
  <link rel="icon" href="/assets/img/favicon.ico" type="image/x-icon" />

  <!-- font -->
  <link href="https://fonts.googleapis.com/css?family=Titillium+Web:400,400i" rel="stylesheet">
</head>

<body>
  <div class="content">

    <header class="header">

  <div class="header_content">
    <label class="theme_changer">
      <input theme_toggle type="checkbox">
      <div class="button"></div>
    </label>
    <a class="header_circle" href="/">
      <img src="/assets/img/cat.jpg" alt="catbook">
    </a>
    <span class="header_name">SOOJIN</span>
    <span class="header_job">배운 것을 기록하는 공간</span>
    <span class="header_mes"></span>

    <nav class="nav">
      
      
      
      <ul class="nav_list">
        <li class="nav_item">
          <a href="/categories/writing" id="aa">writing
            (1)</a>
        </li>
      </ul>
      
      
      <ul class="nav_list">
        <li class="nav_item">
          <a href="/categories/TIL" id="aa">TIL
            (19)</a>
        </li>
      </ul>
      
      
      <ul class="nav_list">
        <li class="nav_item">
          <a href="/categories/React" id="aa">React
            (2)</a>
        </li>
      </ul>
      
      
      <ul class="nav_list">
        <li class="nav_item">
          <a href="/categories/UI-UX" id="aa">UI-UX
            (1)</a>
        </li>
      </ul>
      
      
      <ul class="nav_list">
        <li class="nav_item">
          <a href="/categories/Redux" id="aa">Redux
            (1)</a>
        </li>
      </ul>
      
      
      <ul class="nav_list">
        <li class="nav_item">
          <a href="/categories/css" id="aa">css
            (1)</a>
        </li>
      </ul>
      
    </nav>
  </div>

</header>



    <nav class="mobile_menu">

  <ul class="nav_list">
    
    
    

    <li class="nav_item">
      <a href="/categories/writing" id="aa">writing (1)</a>
    </li>
    
    

    <li class="nav_item">
      <a href="/categories/TIL" id="aa">TIL (19)</a>
    </li>
    
    

    <li class="nav_item">
      <a href="/categories/React" id="aa">React (2)</a>
    </li>
    
    

    <li class="nav_item">
      <a href="/categories/UI-UX" id="aa">UI-UX (1)</a>
    </li>
    
    

    <li class="nav_item">
      <a href="/categories/Redux" id="aa">Redux (1)</a>
    </li>
    
    

    <li class="nav_item">
      <a href="/categories/css" id="aa">css (1)</a>
    </li>
    
  </ul>

</nav>
    
    <main class="main">

    <div class="post">
  <div>
    
    <p class="post_title">번들링과 웹팩</p>
    
  </div>
  <div class="post_data">
    
    <span class="post_date">Nov 23, 2022</span>
    
    
    <span class="post_categories">
      &raquo; 
      <a href="/categories/TIL">TIL</a>
    </span>
    
  </div>
  <div class="post_content">
    <h1>번들링</h1>

<p>번들링이란 무엇인가?</p>

<p>번들링은 <strong>여러 제품이나, 코드, 프로그램을 묶어서 패키지로 제공하는 행위</strong> 를 의미합니다.</p>

<h2>번들링의 필요성</h2>

<p>그렇다면 번들링을 왜 해줘야 할까요?</p>

<ul>
  <li>다른 파일에서 같은 변수 사용시, 이름의 충돌 가능성</li>
  <li>많은 js 파일 다운로드로 인한 네트워크 부하</li>
  <li>수동적인 반복 작업 (파일, 이미지 압축 등)</li>
  <li>배포 코드가 읽기 쉬워 사용자가 임의로 조작할 가능성</li>
</ul>

<h1>Webpack</h1>

<p>Webpack이란 여러 개의 파일을 하나의 파일로 합쳐주는 모듈 번들러를 의미합니다. 모듈 번들러란 HTML, CSS, JavaScript 등의 자원을 전부 각각의 모듈로 보고 이를 조합해 하나의 묶음으로 번들링(빌드)하는 도구입니다. 또한 현재 가장 많이 사용되고 있는 번들러입니다.</p>

<h3> 1.  Loader </h3>

<p>웹팩은 기본적으로 JS와 JSON 형식만을 이해합니다. 여기에 loader를 통해 웹팩이 다양한 형식을 이해하게 해 줄 수 있습니다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">...</span>
  <span class="na">module</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">rules</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">css$/</span><span class="p">,</span>
        <span class="na">use</span><span class="p">:</span> <span class="p">[</span><span class="nx">MiniCssExtractPlugin</span><span class="p">.</span><span class="nx">loader</span><span class="p">,</span> <span class="dl">"</span><span class="s2">css-loader</span><span class="dl">"</span><span class="p">],</span>
        <span class="na">exclude</span><span class="p">:</span> <span class="sr">/node_modules/</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">],</span>
  <span class="p">},</span>
<span class="p">};</span>

</code></pre></div></div>

<ul>
  <li>test: 변환이 필요한 파일들을 식별하기 위한 속성</li>
  <li>use: 변환을 수행하는데 사용되는 로더를 가리키는 속성</li>
  <li>exclude: 바벨로 컴파일하지 않을 파일이나 폴더를 지정. (반대로 include 속성을 이용해 반드시 컴파일해야 할 파일이나 폴더 지정 가능)</li>
</ul>

<p>위의 코드를 추가하게 하면 css 파일 형식은 css 로더를 사용하여 코드를 이해하고 최적화할 수 있게 됩니다. 참고로 특정 파일 형식에 여러 로더를 실행하는 경우 배열의 오른쪽에서부터 왼쪽 순으로 로더가 적용됩니다.</p>

<h3> 2. Plugin </h3>
<p>플러그인은 webpack으로 변환한 파일에 기능을 추가하고 싶을 때 사용합니다.</p>

<p>로더는 파일을 해석하고 번들링한다면 플러그인은 번들링 된 결과물에서 추가적으로 기능을 수행합니다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">const</span> <span class="nx">webpack</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">webpack</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">html-webpack-plugin</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">MiniCssExtractPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">mini-css-extract-plugin</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span>
    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
      <span class="na">template</span><span class="p">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">"</span><span class="s2">src</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">index.html</span><span class="dl">"</span><span class="p">),</span>
    <span class="p">}),</span>
    <span class="k">new</span> <span class="nx">MiniCssExtractPlugin</span><span class="p">(),</span>
  <span class="p">],</span>
<span class="p">};</span>

</code></pre></div></div>

<h3> 3. Entry </h3>

<p>Entry 속성은 Entry point라고도 하며, webpack이 내부의 디펜던시 그래프를 생성하기 위해 사용해야 하는 모듈입니다. Webpack은 이 Entry point를 기반으로 직간접적으로 의존하는 다른 모듈과 라이브러리를 찾아낼 수 있습니다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">//기본 값</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">...</span>
  <span class="na">entry</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./src/index.js</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>

<span class="c1">//지정 값</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">...</span>
  <span class="na">entry</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./src/script.js</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>
<span class="c1">// 기본 값은 ./src/index.js이지만 webpack 설정에서 이런 식으로 Entry 속성을 설정하여 다른 (또는 여러 entry point)를 지정할 수 있습니다.</span>

</code></pre></div></div>

<h3> 4. Output </h3>

<p>Output 속성은 생성된 번들을 내보낼 위치와 이 파일의 이름을 지정하는 방법을 webpack에 알려주는 역할을 합니다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">...</span>
  <span class="na">output</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">path</span><span class="p">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">"</span><span class="s2">docs</span><span class="dl">"</span><span class="p">),</span> <span class="c1">// 절대 경로로 설정을 해야 합니다.</span>
    <span class="na">filename</span><span class="p">:</span> <span class="dl">"</span><span class="s2">app.bundle.js</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">clean</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">},</span>
<span class="p">};</span>

</code></pre></div></div>

<p>위와 같이 설정하면 app.bundle.js가 /dist 밑에 생기게 됩니다.</p>

<p>기본 출력 파일의 경우에는 ./dist/main.js로 , 생성된 기타 파일의 경우에는 ./dist 폴더로 설정됩니다. 위의 예제에서는 output.filename과 output.path 속성을 사용하여 webpack에 번들의 이름과 내보낼 위치를 알려주고 있습니다. path 속성을 사용할 때는 path 모듈을 사용해야만 합니다.</p>

  </div>


  
  <div class="post_comment">

    

    


  </div>
  

</div>


    </main>

  </div>

  <footer class="footer">
  <div>
    &copy; 2022 SOOJIN.
    Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>.
    Get this theme
    <a href="https://github.com/starry99/catbook" target="_blank">here</a>.
  </div>
</footer>

  <!-- js from https://codepen.io/MrGrigri/pen/XQmWBv -->

<script>
// @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&dn=expat.txt Expat
    const themePreference = () => {
        const hasLocalStorage = localStorage.getItem('theme');
        let supports = false;
        let theme = undefined;

        if (hasLocalStorage === 'light') {
            theme = 'light';
        }
        if (hasLocalStorage === 'dark') {
            theme = 'dark';
        }

        if (window.matchMedia(`(prefers_color: dark)`).matches) {
            theme = hasLocalStorage ? hasLocalStorage : 'dark';
            supports = true;
        };
        if (window.matchMedia(`(prefers_color: light)`).matches) {
            theme = hasLocalStorage ? hasLocalStorage : 'light';
            supports = true;
        };
        if (window.matchMedia(`(prefers_color: no-preference)`).matches) {
            theme = hasLocalStorage ? hasLocalStorage : 'none';
            supports = true;
        };

        return {
            supports,
            theme
        };
    }

    document.addEventListener('DOMContentLoaded', e => {
        console.clear();

        const userThemePreference = themePreference();
        const toggle = document.querySelector('[theme_toggle]');
        const html = document.documentElement;

        const setTheme = () => {
            switch (userThemePreference.theme) {
                case 'dark':
                    toggle.checked = true;
                    html.classList.add('dark');
                    html.classList.remove('light');
                    break;
                case 'light':
                    toggle.checked = false;
                    html.classList.remove('dark');
                    html.classList.add('light');
                    break;
            }
        }
        setTheme();
        toggle.addEventListener('click', e => {
            if (toggle.checked) {
                html.classList.add('dark');
                html.classList.remove('light');
                localStorage.setItem('theme', 'dark');
            } else {
                html.classList.remove('dark');
                html.classList.add('light');
                localStorage.setItem('theme', 'light');
            }
        }, false);
    }, false);
// @license-end
</script>

</body>
</html>
